# 08-1 上课计划  
---
## 1 回顾上节课  
---
```07-2
## 07-2
1. 视图的创建与删除   
2. 查询视图  
3. 更新视图  
4. 视图的作用       
```
## 2 学生问题   
- 6、  
	- 32) 查询至多有两名男生的班级  
	- 33).查询至少有一名教授的学院的信息
	- 35）第2种方法   
	- 38）查询班级人数最多的班的学生情况  
	- 42)  查询比软件学院学生年龄都小的其他系学生的信息  
	- 43）第2种方法    
	- 45）查询计算机导论平均成绩最高的班级、第2种方法  
	- 46）查询选修人数最多的课程是哪个老师教的，显示教师号，教师姓名  
	- 47）查询余孝天老师所教各门课程的平均成绩   
	- 48)  查询鲁婵娟老师所教课程的各个班级平均成绩  
	- 49）查询鲁婵娟老师所教课程的学生的成绩  
	- 52）查询软件学院教师所教课程的成绩，将结果按课程号降序排列  
	- 55) 查询成绩高于《数据结构》平均成绩的学生信息。
	- 56)  查询学生选修课程的情况，显示学号、姓名、教师姓名、课程名称、成绩  
	- 59) 查询数信学院的学生各科平均成绩，显示课程名、平均成绩  
	- 60).查询选修了全部课程的学生的信息。   
	- 63）查询和刘英伟同年出生的学生信息（参考 sql 日期操作函数）  
	- 67）查询低于该门课程平均分的学生的成绩信息  
	- 68）年龄小于 23 岁的女老师和女学生的信息  
- 7、  
	- （1）将年龄小于 18 岁的男同学的年龄都增大 1 岁  
	- （10）将 2000 年 9 月 1 日以前入学的学生记录删除  
- 8、  
	- （3）将各个学院的学生人数定义为视图，包括学院编号、人数    



## 3 本节课内容      
- 安全性控制的概述     
- 用户标识与鉴别   
- 存取控制  
### 3.1 安全性控制的概述   
- 编写合法程序绕过DBMS及其授权机制   
- 直接或编写应用程序执行非授权操作   
- 通过多次合法查询数据库从中推导出一些保密数据  
- 破坏安全性的行为可能是无意的，故意的，恶意的    

- 安全控制的层次   
	- 用户识别与鉴定   
	- DBMS存取控制   
	- 数据加密  
	- 审计追踪   

- 数据库安全性控制的常用方法   
	- 用户标识和鉴定  
	- 存取控制  
	- 视图  
	- 审计  
	- 密码存储  

### 3.2 用户的标识与鉴别  
- 系统提供的最外层安全保护措施    
- 用户标识   
- 口令   
	- 系统核对口令以鉴别用户身份   
- 用户名和口令易被窃取   
	- 每个用户预先约定好一个计算过程或者函数   
### SQL Server 2008安全验证模式  
- 当用户使用SQL  SERVER2008时，需要经过两个安全性阶段，身份验证和权限认证阶段   
- 身份验证阶段  
	- 用户在SQL SERVER2008上获得任何数据库访问权限之前，必须首先登录到SQL SERVER2008并且是合法的，否则服务器将拒绝用户登录   
- 权限验证阶段   
	- 身份验证阶段只能验证用户是否具有连接到SQL SERVER2008的权限，通过身份验证后，需要验证用户是否具有访问服务器数据的权限，为此需要为每个数据库建立用户，并将账户映射到登录账户，并为用户分配对象的访问权限  
- SQL Server 2008提供了两种确认用户对数据库引擎服务的验证模式   
	- Windows身份验证   
		- Windows验证模式允许SQL Server可以使用Windows的用户名和口令。在这种模式下，用户只需要通过Windows的验证，就可以连接到SQL Server，登录SQL Server时就不再需要输入帐户和密码了。  
	- SQL Server身份验证    
		- SQL Server身份验证模式要求用户在连接SQL Server时必须提供登录名和登录密码，与Windows的登录帐号无关。SQL Server自身执行认证处理。 利用这种方式可以很方便地从网络上访问sql server服务器。  

```SQL
-- 26. 创建登录  
create login U1
with password = '123456';

-- 27. 创建用户  
create user U1 
for login U1;

-- 28.授权  
grant select 
on  student
to U1;

create login U2
with password = '123456';

create user U2 
for login U2;

create login U3
with password = '123456';

create user U3 
for login U3;

grant all privileges
on course  
to U2, U3;  

grant select
on sc  
to public;  

grant update
on  student
to U1;

grant select 
on  student
to U1
with grant option ;

-- 29. 回收权限  
revoke select 
on course
from U2;

revoke select 
on sc
from public ;

revoke select
on student
from U1 CASCADE;

-- 30.删除登录  
create login U4
with password = '123456';

create user U4 
for login U4;

-- a. 手动删除  
-- b. SQL语句  
drop login U4;
drop user U4;
 
```






## 4 课下要求  
1. 抽空再看看题目       
2. 等下周一丁老师讲完了，我再捡着补充      




