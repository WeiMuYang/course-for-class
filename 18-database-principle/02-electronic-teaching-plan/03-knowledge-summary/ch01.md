## 第1章 绪论       

[TOC]

---
### 1.1 数据库系统概述    
- 数据库系统的课程地位     
	1. 产生于六十年代末   
	2. 信息系统   
#### 1.1.1 数据库4个基本概念  
-  数据  
	1. 数据的定义：描述事物的符号记录   
	2. 数据的种类：文字、图像、图形、声音  
	3. 特点：数据与其语义不可分   
	4. 举例：  
		- 学生记录   
		- 表达方式   
		- 数据解释   

- 数据库   
	1. 数据库的定义：长期储存在计算机内、有组织的、可共享的大量数据的集合。   
	2. 基本特征：  
		- 数据按一定的数据模型组织、描述和存储   
		- 可为各种用户共享  
		- 冗余度较小   
		- 数据独立性较高   
		- 易拓展   

- 数据库管理系统   
	1. 和操作系统一样，是计算机的基础软件   
	2. DBMS主要功能   
        - 数据定义功能   
		- 数据组织、存储和管理   
		- 数据操纵功能    
        - 数据库的事务管理和运行管理   
		- 数据库的建立和维护功能   
		- 其它功能   

- 数据库系统   
	1. 构成：数据库、数据库管理系统（及其应用开发工具）、应用程序、数据库管理员   
	2. 有以上4部分组成的存储、管理、处理和维护数据的系统   

#### 1.1.2 数据管理技术的产生和发展   
1. 数据管理的定义   
2. 发展3个阶段   

名称|时期|背景|特点
-|-|-|-
人工管理阶段|20世纪40年代中--50年代中|应用需求、科学计算、硬件水平、无直接存取存储设备、软件水平、没有操作系统、处理方式批处理|1. 数据的管理者：用户（程序员） 数据不保存<br>2.数据面向的对象：某一应用程序<br>3. 数据的共享程度：无共享、冗余度极大 <br>4. 数据的独立性：不独立，完全依赖于程序 <br>5. 数据的结构化：无结构 <br> 6.数据控制能力：应用程序自己控制  
文件系统阶段|20世纪50年代末--60年代中|1. 应用需求 科学计算、管理	<br>2. 硬件水平	磁盘、磁鼓 <br>3.软件水平 有文件系统 <br>4. 处理方式	联机实时处理、批处理|1. 数据的管理者：文件系统，数据可长期保存 <br>2. 数据面向的对象：某一应用程序 <br>3.  数据的共享程度：共享性差、冗余度大   <br>4. 数据的结构化：记录内有结构,整体无结构   <br>5. 数据的独立性：独立性差，数据的逻辑结构改变必须 修改应用程序 <br>6.数据控制能力：应用程序自己控制    
数据库系统阶段|20世纪60年代末以来|1. 应用背景：大规模管理 <br>2. 硬件背景：大容量磁盘、磁盘阵列 <br> 3. 软件背景：有数据库管理系统 <br>4.  处理方式：联机实时处理,分布处理,批处理|1. 数据结构化 <br>2. 数据的共享性高，冗余度低，易扩充 <br>3. 数据独立性高 <br>4. 数据由DBMS统一管理和控制    
#### 1.1.3 数据库系统的特点     
1. **整体数据的结构化**是数据库的主要特征之一  
	- 整体结构化  
	- 不再仅仅针对某一个应用，而是面向全组织  
	- 不仅数据内部结构化，整体是结构化的，数据之间具有联系  
	- 数据库中实现的是数据的真正结构化  
		- 数据的结构用**数据模型**描述，无需程序定义和解释  
		- 数据可以**变长**  
		- 数据的最小存取单位是**数据项**   
2. 数据的共享性高，冗余度低，易扩充   
	- 数据库系统从整体角度看待和描述数据，数据面向整个系统，可以被多个用户、多个应用共享使用  
	- 数据共享的好处  
		- 减少数据冗余，节约存储空间  
		- 避免数据之间的不相容性与不一致性   
		- 使系统易于扩充  
3. 数据独立性  
	- 物理独立性  
		- 指用户的应用程序与存储在磁盘上的数据库中数据是相互独立的。当数据的物理存储改变了，应用程序不用改变。  
	- 逻辑独立性  
		- 指用户的应用程序与数据库的逻辑结构是相互独立的。数据的逻辑结构改变了，用户程序也可以不变。  
	- 数据独立性是由DBMS的二级映像功能来保证的   
4. 数据由DBMS统一管理和控制   
	- 数据的安全性（Security）保护: 保护数据，以防止不合法的使用造成的数据的泄密和破坏  
	- 数据的完整性（Integrity）检查: 将数据控制在有效的范围内，或保证数据之间满足一定的关系  
	- 并发（Concurrency）控制: 对多用户的并发操作加以控制和协调，防止相互干扰而得到错误的结果  
	- 数据库恢复（Recovery）: 将数据库从错误状态恢复到某一已知的正确状态  

---
### 1.2 数据模型  
- 在数据库中用数据模型这个工具来抽象、表示和处理现实世界中的数据和信息   
- 通俗地讲数据模型就是现实世界的模拟   
- 数据模型应满足三方面要求   
	1. 能比较真实地模拟现实世界   
	2. 容易为人所理解   
	3. 便于在计算机上实现  
#### 1.2.1 数据模型分为两类（分属两个不同的层次）    
1. 概念模型  
	- 也称信息模型，它是按用户的观点来对数据和信息建模，用于数据库设计   
2. 逻辑模型和物理模型   
	- 逻辑模型主要包括网状模型、层次模型、关系模型、面向对象模型等，按计算机系统的观点对数据建模，用于DBMS实现   
	- 物理模型是对数据最底层的抽象，描述数据在系统内部的表示方式和存取方法，在磁盘或磁带上的存储方式和存取方法    

📌  数据模型是数据库系统的核心和基础    
📌 首先将现实世界抽象为信息世界，然后将信息世界转换为机器世界   
#### 1.2.2 概念模型  
- 概念模型是现实世界和机器世界的一个中间层   
1. 信息世界的基本概念   
	- 实体：客观存在并相互区别的事物   
	- 属性：实体所具有的的某一特性   
	- 码：惟一标识实体的属性集   
	- 实体型：用实体名及其属性名集合来抽象和刻画同类实体  
	- 实体集：同一类型实体的集合   
	- 联系
		- 实体内部联系：通常指组成实体的各属性之间的联系  
		- 实体之间的联系：通常指不同实体集之间的联系，一对一、一对多和多对多等   
2. 概念模型的一种表示方法：实体-联系方法   
	- Entity-Relationship，E-R方法也称为E-R模型  
#### 1.2.3 数据模型组成要素  
- 通常由数据结构、数据操作和数据完整性约束条件三部分组成    
1. 数据结构   
	- 描述数据库的组成对象以及对象之间的联系  
	- 一类是与对象的类型、内容、性质有关   
	- 一类是与数据之间联系有关的对象  
	- 是对系统静态特征的描述   
2. 数据操作   
	- 数据库中各种对象（型）的实例（值）允许执行的操作的集合，包括操作及有关的操作规则  
	- 主要有查询和更新两大类操作   
	- 是对系统动态特征的描述   
3. 数据的完整性约束条件   
	- 是一组完整性规则   
	- 完整性规则：给定的数据模型中数据及其联系所具有的制约和储存规则   
	- 用以限定符合数据模型的数据库状态以及状态的变化，以保证数据的正确、有效、相容  
	- 实体完整性、参照完整性和用户定义完整性   
	- 数据模型对完整性约束条件的定义   
		- 反映和规定本数据模型必须遵守的基本的通用的完整性约束条件。例如在关系模型中，任何关系必须满足实体完整性和参照完整性两个条件   
		- 提供定义完整性约束条件的机制，以反映具体应用所涉及的数据必须遵守的特定的语义约束条件  
#### 1.2.4 常用的数据模型   
- 层次模型  
- 网状模型  
- 关系模型  
- 面向对象数据模型  
- 对象关系数据模型  
- 半结构化数据模型  

📌 数据结构、数据操作和数据完整性约束条件这三部分内容可以完整描述一个数据模型   
#### 1.2.5 层次模型  
1. 层次模型的数据结构   
	- 满足两个条件：  
		- 有且只有一个结点没有双亲结点，这个结点成为根结点  
		- 根以外的其他结点有且只有一个双亲结点   
	- 每个结点表示一个记录类型，记录类型之间的联系用结点之间的连线（有向边）表示，这种联系是父子之间一对多的联系  
	- 像一颗倒立的树，结点的双亲惟一，有向树   
2. 层次模型的数据操作与完整性约束   
	- 数据操作：查询、插入、删除和更新  
	- 更新操作时，满足层次模型的完整性约束条件   
3. 层次模型的优缺点   
	- 优点：简单、查询效率高、良好完整性支持   
	- 缺点：现实世界很多联系并非一对多、插入和删除复杂、层次命令趋于程序化   
#### 1.2.6 网状模型   
- 典型的代表：OBTG系统   
1. 网状模型数据结构  
	- 满足两个条件：  
		- 允许一个以上结点无双亲   
		- 一个结点可以有多于一个双亲  
	- 子女结点和双亲结点的联系可以不唯一   
2. 网状模型的数据操作与完整性约束   
3. 网状模型的优缺点   
	- 优点：更直观反映现实世界、存取效率高   
	- 缺点：结构复杂、需要嵌入语言，不易使用、需要有合适的存取路径   
#### 1.2.7 关系模型   
- 关系模型是最重要的数据模型   
- 本书的重点也放在关系数据库上   
1. 关系模型数据结构  
	- 关系：一个关系对应通常说的一张表   
	- 元组：表中的一行既是一个元组   
	- 属性：表中的一列即为一个属性   
	- 码：也称为码键。表中一个属性组  
	- 域：一组具有相同数据结构的值的集合   
	- 分量：元组中一个属性值   
	- 关系模式：关系的描述   

📌 关系模型要求必须是规范化的，关系的每一个分量必须是一个不可分的数据项  
2. 关系模型的数据操作与完整约束条件  
	- 关系操纵：查询、插入、删除和更新  
	- 完整性约束条件：实体完整性、参照完整性和用户定义完整性  
3. 关系模型的优缺点
	- 优点：建立在严格数学概念的基础上 、概念单一和存储路径对用户透明  
	- 缺点：查询效率不如格式化的数据，需要对请求优化  

---
### 1.3 数据库系统的结构   
- 从数据库应用开发人员角度看，数据库系统通常采用三级模式结构，是数据库系统内部的系统结构    
- 从数据库最终用户角度看（数据库系统外部的体系结构） ，数据库系统的结构分为:  
	- 单用户结构  
	- 主从式结构  
	- 分布式结构  
	- 客户／服务器  
	- 浏览器／应用服务器／数据库服务器多层结构等  
#### 1.3.1 数据库模式的概念   
- 数据模型中有“型”和“值”的概念   
	- 型：对某一类数据的结构和属性的说明   
	- 值：是型的一个具体赋值   
- 模式是数据库中全体数据的逻辑结构和特征的描述，仅仅涉及型的描述，不涉及具体的值   
- 模式的一个具体值称为模式的实例  
- 模式是相对稳定的，而实例是相对变动的   
- 数据库管理系统具有相同特征：三级模式结构并提供两级映像   
#### 1.3.2 数据库三级模式结构  
1. 模式  
	- 模式也称逻辑模式，是数据库全体数据的逻辑结构和特征的描述，是所有用户的公共数据视图   
	- 是数据库系统结构的中间层   
		- 不涉及物理存储细节   
		- 又与具体的应用程序、所使用开发工具及高级程序设计语言无关   
	- 一个数据库只有一个模式   
2. 外模式   
	- 外模式也称子模式或用户模式，它是数据库用户能够看见和使用的局部数据的逻辑结构和特征描述   
	- 是数据库用户的数据视图  
	- 是与某一应用有关的数据逻辑表示   
	- 外模式通常是模式的子集  
	- 一个数据库可以有多个外模式，但是一个应用程序只能有一个外模式  
3. 内模式   
	- 内模式也称存储模式，一个数据只有一个内模式。   
	- 它是数据物理结构和存储方式的描述，是数据在数据库内部的组织方式  
	- 例如：堆存储、按某个属性升序存储；如何索引；如何压缩，是否加密等   
#### 1.3.3 数据库的二级映像功能与数据独立性   
- 为了能够在系统内部实现这三个抽象层次的联系和转换，数据库管理系统在这三级模式之间提供两层映像：外模式/模式映像和模式/内模式映像   
- 正是这两层映像保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性   
1. 外模式/模式映像   
	- 模式描述的数据的全局逻辑结构，外模式描述的是数据的局部逻辑结构  
	- 档模式改变时（增加新的关系、新的属性、改变属性的数据类型），数据库管理员对各个外模式/模式的映像做相应的改变，可以使外模式保持不变  
	- 应用程序是依据数据的外模式编写的，从而应用程序不用修改，保证了数据和程序的逻辑独立性，简称**数据的逻辑独立性**   
2. 模式/内模式映像   
	- 一个数据库中只有一个模式，也只有一个内模式，所以，模式/内模式映像是惟一的   
	- 定义了数据全局逻辑结构与存储结构之间的对应关系   
	- 数据库存储结构发生改变时，由数据库管理员对模式/内模式映像做相应改变，可以使模式保持不变，从而应用程序也不必改变   
	- 保证了数据与程序的物理独立性，简称**数据的物理独立性**   
- 数据库的内模式依赖于它的全局逻辑结构，但独立于数据库的用户视图，即外模式，也独立于具体存储设备   
- 数据和程序的独立性使得数据的定义和描述可以从应用程序中分离出去    
- 由于数据的存取由数据库管理系统管理，从而简化了应用程序的编制，大大减少了应用程序的维护和修改   

---
### 1.4 数据库系统的组成  
1. 硬件平台及数据库  
	- 足够大的内存   
		- 操作系统   
		- 数据库管理系统的核心模块   
		- 数据缓冲区  
		- 应用程序   
	- 足够大的磁盘和磁盘列阵（外存）   
		- 数据库   
		- 磁带  
		- 光盘  
		- 数据备份  
	- 较高的通道能力   
		- 数据传送率   
2. 软件   
	- 数据库管理系统   
		- 数据库的建立   
		- 数据库的使用   
		- 数据库的维护   
	- 操作系统   
		- 支持数据库管理系统的运行  
	- 语言和编译系统  
		- 与数据库接口，便于应用开发   
	- 以数据库管理系统为核心的应用开发工具  
		- 应用生成器   
		- 良好开发环境  
	- 为特定应用环境开发的数据库应用系统   
3. 人员  
	- 数据库管理员   
		- 决定数据库中的信息内容和结构  
		- 决定数据库的存储结构和存储策略  
		- 定义数据的安全性要求和完整性约束条件   
		- 监控数据库的使用和运行  
		- 数据库的改进和重组、重构   
	- 系统分析员   
		- 需求分析   
		- 规范说明  
		- 确定硬件配置  
		- 参与数据库的概要设计  
	- 数据库设计人员  
		- 数据的确定  
		- 数据库各级模式的设计   
		- 用户需求调查和系统分析  
	- 应用程序员  
		- 设计和编写应用系统的程序模块   
		- 进行调试安装   
	- 最终用户  
		- 偶然用户：不经常访问数据库，但每次访问往往需要不同的数据库信息，例如：企业的中高级管理人员   
		- 简单用户：最终用户，例如：企业职员、服务员、工作人员等   
		- 复杂用户：具有高科学技术背景的人员，例如：工程师、科学家等   

---


























